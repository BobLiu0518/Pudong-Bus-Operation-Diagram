
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <title>浦交模拟图</title>
    <style type="text/css">
        *
        {
            padding: 0;
            margin: 0;
            border: 0;
        }
        body
        {
            width: 100%;
            height: 100%;
            background: #ededf0;
            text-align: center;
            font-size: 16px;
            font-family: "微软雅黑";
            line-height: 1.5;
        }
        .queryBox
        {
            width: 100%;
            position: relative;
            margin-top: 10px;
            background: #fff;
            border-top: #c8c7cc 1px solid;
            border-bottom: #c8c7cc 1px solid;
        }
        input[name="bus"]
        {
            margin-left: 0.5em;
            display: block;
            width: 80%;
            height: 2.5em;
            font-size: 1.2em;
        }
        input[name="icon"]
        {
            position: absolute;
            z-index: 1;
            font-size: 1.2em;
            width: 2.5em;
            height: 2.5em;
            top: 0;
            right: 0;
            background: url(Images/bs.png) no-repeat center center;
            background-size: 50% 50%;
        }
        input:focus
        {
            outline: none;
        }
        .error
        {
            color: #f00;
        }
        .error, .taps
        {
            margin: 15px 0.5em 0;
            text-align: left;
        }
        .error
        {
            display: none;
        }
        .taps p
        {
            position: relative;
            text-align: left;
            font-size: 0.9em;
            color: #535353;
            padding-left: 20px;
            word-break: break-all;
        }
        .taps p span
        {
            position: absolute;
            z-index: 10;
            left: 0;
            top: 0;
        }
        
        ul#xc li
        {
            padding-left: 0.5em;
            display: block;
            height: 2.5em;
            font-size: 1.1em;
            line-height: 2.5em;
            border-bottom: #c8c7cc 1px solid;
        }
        ul#xc li:hover
        {
            background: #ccc;
        }
        ul#xc
        {
            width: 100%;
            background: #fff;
            z-index: 1000;
        }
        img.bottom
        {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            display: block;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="css/loading.css">
    <link href="css/loading.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
    <script  type="text/javascript">
       function onBridgeReady(){
			WeixinJSBridge.call('hideOptionMenu');
		}
		
		$(function(){
		
		if (typeof WeixinJSBridge == "undefined"){
			if( document.addEventListener ){
				document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
			}else if (document.attachEvent){
				document.attachEvent('WeixinJSBridgeReady', onBridgeReady); 
				document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
			}
		}else{
			onBridgeReady();
		}
		
		});

		
        function showalert(param) {
            //alert("aaaaa");
            var key = param;
            var ih = $('#xc').html();
            var data = [
    "1001",
"1002",
"1003",
"1004",
"1005",
"1006",
"1007",
"1008",
"1009",
"1010",
"1011",
"1012",
"1013",
"1015",
"1016",
"1017",
"1018",
"1019",
"1020",
"1021",
"1022",
"1023",
"1024",
"1025",
"1026",
"1027",
"1028",
"1029",
"1030",
"1031",
"1032",
"1033",
"1034",
"1035",
"1036",
"1037",
"1038",
"1039",
"1040",
"1041",
"1042",
"1043",
"1045",
"1046",
"1047",
"1048",
"1049",
"1050",
"1051",
"1052",
"1053",
"1054",
"1055",
"1056",
"1057",
"1058",
"1059",
"1060",
"1061",
"1062",
"1063",
"1064",
"1065",
"1066",
"1067",
"1068",
"1069",
"1070",
"1071",
"1072",
"1073",
"1074",
"1075",
"1077",
"1078",
"1079",
"1080",
"1081",
"1082",
"1083",
"1085",
"1086",
"1087",
"1088",
"1089",
"1090",
"1091",
"1092",
"1093",
"1094",
"1095",
"1096",
"1097",
"1098",
"1099",
"1100",
"1101",
"1102",
"1103",
"1104",
"1105",
"1106",
"1107",
"1108",
"1109",
"1110",
"1111",
"1112",
"1113",
"1115",
"1116",
"1117",
"1118",
"1120",
"1121",
"1122",
"119",
"130",
"161",
"163",
"167",
"169",
"174",
"175",
"177",
"181",
"182",
"183",
"188",
"219",
"313",
"314",
"338",
"451",
"453",
"454",
"455",
"572",
"'浦东43路'",
"'986路区间'",
"'991路区间'",
"573",
"576",
"581",
"583",
"604",
"610",
"611",
"614",
"636",
"638",
"639",
"640",
"772",
"774",
"775",
"777",
"778",
"779",
"780",
"781",
"782",
"783",
"784",
"785",
"786",
"787",
"789",
"790",
"791",
"792",
"794",
"795",
"796",
"798",
"799",
"815",
"81",
"82",
"83",
"843",
"84",
"85",
"863",
"871",
"915",
"955",
"961",
"969",
"970",
"971",
"976",
"977",
"978",
"980",
"981",
"983",
"984",
"985",
"986",
"987",
"988",
"989",
"990",
"991",
"992",
"993",
"995",
"873",
"北蔡1路",
"北蔡2路",
"蔡陆专线",
"曹路1路",
"曹路2路",
"曹路3路",
"曹路4路",
"川航专线",
"川芦专线",
"川三线",
"川沙2路",
"川沙3路",
"川沙4路",
"川沙5路",
"大泥专线",
"大桥六线",
"大桥四线",
"大桥五线",
"大团2路",
"国际旅游度假区2路",
"国际旅游度假区3路",
"航大专线",
"航奉专线",
"航头3路",
"航头4路",
"航头5路",
"合庆1路",
"鹤莘线",
"沪川线",
"沪南线",
"花木1路",
"花木2路",
"惠南10路",
"惠南11路",
"惠南1路",
"惠南2路",
"惠南3路",
"惠南4路",
"惠南5路",
"惠南6路",
"惠南8路",
"机场八线",
"机场七线",
"金桥1路",
"老港1路",
"两滨专线",
"六灶2路",
"986路区间",
"龙大专线",
"龙东专线",
"龙港快线",
"龙惠专线",
"龙临专线",
"龙芦专线",
"龙新芦专线",
"芦潮港1路",
"芦杜专线",
"陆家嘴金融城1路",
"陆家嘴金融城2路",
"陆家嘴金融城3路",
"陆家嘴金融城4路",
"陆家嘴金融城5路",
"陆家嘴金融城环线",
"闵行20路",
"南川线",
"南闵专线",
"南南线",
"南新专线",
"南园1路",
"泥城1路",
"泥城2路",
"泥城4路",
"泥城5路",
"浦东10路",
"浦东12路",
"浦东18路",
"浦东19路",
"浦东1路",
"浦东20路",
"浦东22路",
"浦东23路",
"浦东24路",
"浦东25路",
"浦东27路",
"浦东28路",
"浦东29路",
"浦东2路",
"浦东30路",
"浦东31路",
"浦东32路",
"浦东33路",
"浦东35路",
"浦东36路",
"浦东37路",
"浦东38路",
"浦东39路",
"浦东3路",
"浦东41路",
"浦东42路",
"浦东4路",
"浦东50路",
"浦东50路区间",
"浦东51路",
"浦东52路",
"浦东6路",
"浦东7路",
"浦东8路",
"浦东9路",
"浦江11路",
"浦江1路",
"浦江2路",
"浦江3路",
"浦江4路",
"浦江5路",
"浦江6路",
"浦江7路",
"三林1路",
"申崇二线",
"申崇六线",
"申崇六线B",
"申崇四线",
"申崇四线区间",
"申港1路",
"申港3路",
"申港4路",
"施崂专线",
"书院2路",
"书院3路",
"隧道九线",
"隧道六线",
"隧道三线",
"隧道一线",
"外高桥1路",
"外高桥3路",
"外高桥4路",
"万祥2路",
"新场1路",
"新场2路",
"新场3路",
"新场5路",
"新川专线",
"新芦专线",
"宣桥1路",
"洋山专线",
"洋山专线区间",
"张江1路",
"张江环线",
"张南专线",
"周康10路",
"周康1路",
"周康2路",
"周康3路",
"周康4路",
"周康5路",
"周康6路",
"周康8路",
"周康9路",
"周南线",
"祝桥1路",
"祝桥2路",
"祝桥3路",

];
            if (key != '') {
                //这里给个全数据

                xt = check(data, key);
                //alert(xt);
                $('#xc').html('');
                $('#xc').append(xt);
                $('#xc').css('display', 'block');
            } else {
                $('#xc').html('');
            }
        }

        function check(data, key) {
            var out = '';
            var temp = new Array();
            for (var i = 0; i < data.length; i++) {
                var s = data[i].indexOf(key);
                if (s == 0 && data[i] != key) {
                    temp.push(data[i]);
                }
            }


            temp.sort(function (a, b) {
                var fa = a.replace(/[^0-9]/ig, "");
                var fb = b.replace(/[^0-9]/ig, "");

                var ta = parseInt(fa);
                var tb = parseInt(fb);

                return ta - tb;
            });
            for (var ii = 0; ii < temp.length; ii++) {
                out += "<li onClick=\"javascript:change('" + temp[ii] + "')\">" + temp[ii] + "</li>";
            }
            return out;
        }

        function change(val) {
            $('#bus').val(val);
            $('#xc').html('');
            $('#check').click();
        }
        $(function () {

            $('#check').click(function () {
                var line = $("#bus").val();
                if (line == "") {
                    $("#error").html("请选择线路");
                    $('#error').show();
                    return;
                }
                $("#mask,#loader").show();
                var urlx = "index.htm?roadline=" + escape(line);
                location.href = urlx;

            });
        })

        function urlencode(str) {
            str = (str + '').toString();

            return encodeURIComponent(str).replace(/!/g, '%21').replace(/'/g, '%27').replace(/\(/g, '%28').
    replace(/\)/g, '%29').replace(/\*/g, '%2A').replace(/%20/g, '+');
        }

        //===base64 start====
        var base64EncodeChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
        var base64DecodeChars = new Array(-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1);
        /**
        * base64编码
        * @param {Object} str
        */
        function base64encode(str) {
            var out, i, len;
            var c1, c2, c3;
            len = str.length;
            i = 0;
            out = "";
            while (i < len) {
                c1 = str.charCodeAt(i++) & 0xff;
                if (i == len) {
                    out += base64EncodeChars.charAt(c1 >> 2);
                    out += base64EncodeChars.charAt((c1 & 0x3) << 4);
                    out += "==";
                    break;
                }
                c2 = str.charCodeAt(i++);
                if (i == len) {
                    out += base64EncodeChars.charAt(c1 >> 2);
                    out += base64EncodeChars.charAt(((c1 & 0x3) << 4) | ((c2 & 0xF0) >> 4));
                    out += base64EncodeChars.charAt((c2 & 0xF) << 2);
                    out += "=";
                    break;
                }
                c3 = str.charCodeAt(i++);
                out += base64EncodeChars.charAt(c1 >> 2);
                out += base64EncodeChars.charAt(((c1 & 0x3) << 4) | ((c2 & 0xF0) >> 4));
                out += base64EncodeChars.charAt(((c2 & 0xF) << 2) | ((c3 & 0xC0) >> 6));
                out += base64EncodeChars.charAt(c3 & 0x3F);
            }
            return out;
        }
        /**
        * base64解码
        * @param {Object} str
        */
        function base64decode(str) {
            var c1, c2, c3, c4;
            var i, len, out;
            len = str.length;
            i = 0;
            out = "";
            while (i < len) {
                /* c1 */
                do {
                    c1 = base64DecodeChars[str.charCodeAt(i++) & 0xff];
                }
                while (i < len && c1 == -1);
                if (c1 == -1)
                    break;
                /* c2 */
                do {
                    c2 = base64DecodeChars[str.charCodeAt(i++) & 0xff];
                }
                while (i < len && c2 == -1);
                if (c2 == -1)
                    break;
                out += String.fromCharCode((c1 << 2) | ((c2 & 0x30) >> 4));
                /* c3 */
                do {
                    c3 = str.charCodeAt(i++) & 0xff;
                    if (c3 == 61)
                        return out;
                    c3 = base64DecodeChars[c3];
                }
                while (i < len && c3 == -1);
                if (c3 == -1)
                    break;
                out += String.fromCharCode(((c2 & 0XF) << 4) | ((c3 & 0x3C) >> 2));
                /* c4 */
                do {
                    c4 = str.charCodeAt(i++) & 0xff;
                    if (c4 == 61)
                        return out;
                    c4 = base64DecodeChars[c4];
                }
                while (i < len && c4 == -1);
                if (c4 == -1)
                    break;
                out += String.fromCharCode(((c3 & 0x03) << 6) | c4);
            }
            return out;
        }
        /**
        * utf16转utf8
        * @param {Object} str
        */
        function utf16to8(str) {
            var out, i, len, c;
            out = "";
            len = str.length;
            for (i = 0; i < len; i++) {
                c = str.charCodeAt(i);
                if ((c >= 0x0001) && (c <= 0x007F)) {
                    out += str.charAt(i);
                }
                else
                    if (c > 0x07FF) {
                        out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));
                        out += String.fromCharCode(0x80 | ((c >> 6) & 0x3F));
                        out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F));
                    }
                    else {
                        out += String.fromCharCode(0xC0 | ((c >> 6) & 0x1F));
                        out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F));
                    }
            }
            return out;
        }
        /**
        * utf8转utf16
        * @param {Object} str
        */
        function utf8to16(str) {
            var out, i, len, c;
            var char2, char3;
            out = "";
            len = str.length;
            i = 0;
            while (i < len) {
                c = str.charCodeAt(i++);
                switch (c >> 4) {
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                        // 0xxxxxxx
                        out += str.charAt(i - 1);
                        break;
                    case 12:
                    case 13:
                        // 110x xxxx 10xx xxxx
                        char2 = str.charCodeAt(i++);
                        out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));
                        break;
                    case 14:
                        // 1110 xxxx10xx xxxx10xx xxxx
                        char2 = str.charCodeAt(i++);
                        char3 = str.charCodeAt(i++);
                        out += String.fromCharCode(((c & 0x0F) << 12) | ((char2 & 0x3F) << 6) | ((char3 & 0x3F) << 0));
                        break;
                }
            }
            return out;
        }
        //demo
        //function doit(){
        //    var f = document.f;
        //    f.output.value = base64encode(utf16to8(f.source.value));
        //    f.decode.value = utf8to16(base64decode(f.output.value));
        //}

        //===base64 end =====
    </script>

    <div style="display: none;"><textarea></head></textarea></head></div>

<body>
    <div>
        <article>
            <div class="queryBox">
                <input type="text" autocomplete="off" id="bus" placeholder="Please Type the line name here" value="" name="bus"
                    oninput="showalert(this.value)" />
                <input type="submit" id="check" value="" name="icon" />
            </div>
            <div style="text-align: left; position: relative; z-index: 100; width: 100%;">
                <ul id="xc">
                </ul>
            </div>
            <div class="error" id="error">
            </div>
            <div class="taps">
                <p>
                    <span>1、</span>Please type down the line which you wanna search，such as "795路"、"985路"、"浦东37路"、"572路';
"</p>
               <p>
                    <span>2、</span>自己填写的区域</p>
                <p>
                    <span>3、</span>支持车辆跟踪，点击车辆后的消息窗会随车辆的前进同步 *New! <br/>
                    自己填写的区域 <br/><h4>Version 2.0 Beta 2019-06-21 Build Powered By Leo<br/>
                    开源地址：<a href="https://github.com/sjlleo/shanghai-bus-operation-diagram">https://github.com/sjlleo/shanghai-bus-operation-diagram</a></h4></p>
                <!--p>
                    <span>
                    4、是谁无聊地搞了一个模拟图来玩呢 不告诉你 :) <br/><font color="#ededf0">sjlleo 是我啦 被你发现了@^_^</font> </span></p-->

            </div>
        </article>
        <div id="mask">
        </div>
        <div id="loader">
            <div id="fountainG">
                <div id="fountainG_1" class="fountainG">
                </div>
                <div id="fountainG_2" class="fountainG">
                </div>
                <div id="fountainG_3" class="fountainG">
                </div>
                <div id="fountainG_4" class="fountainG">
                </div>
                <div id="fountainG_5" class="fountainG">
                </div>
                <div id="fountainG_6" class="fountainG">
                </div>
                <div id="fountainG_7" class="fountainG">
                </div>
                <div id="fountainG_8" class="fountainG">
                </div>
            </div>
        </div>
    </div>
</body>
</html>
